%% Ki·∫øn tr√∫c t·ªïng quan ƒë∆°n gi·∫£n
%% High-level Architecture Overview

graph LR
    subgraph Client["CLIENT SIDE"]
        User["üë§ User"]
        UI["ü¶† Chrome Extension<br/>- Floating Button<br/>- Side Panel<br/>- Content Script"]
        Web["üåê Website DOM<br/>(Any webpage)"]
    end
    
    subgraph Server["SERVER SIDE (localhost:8000)"]
        API["üîå FastAPI Backend"]
        Pipeline["‚öôÔ∏è Processing Pipeline"]
        Model["ü§ñ PhoBERT NER Model"]
    end
    
    subgraph External["EXTERNAL"]
        Gemini["‚òÅÔ∏è Gemini AI"]
    end
    
    %% Main Flow
    User -->|"Interact"| UI
    UI <-->|"Extract/Highlight"| Web
    UI <-->|"HTTP API Calls<br/>(JSON)"| API
    API --> Pipeline
    Pipeline --> Model
    Pipeline -.->|"Optional<br/>(Auto Mode)"| Gemini
    API -->|"Response<br/>(Entities + Patients)"| UI
    UI -->|"Display Results"| User
    
    %% Styling
    classDef clientStyle fill:#e1f5ff,stroke:#01579b,stroke-width:3px
    classDef serverStyle fill:#f3e5f5,stroke:#4a148c,stroke-width:3px
    classDef externalStyle fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    
    class User,UI,Web clientStyle
    class API,Pipeline,Model serverStyle
    class Gemini externalStyle
